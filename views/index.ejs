<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>likeastore.</title>
  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/demo.css">
  <!--[if lt IE 9]>
    <script src="../assets/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <section class="wrap">
    <div class="logo">likeastore</div>
    <div class="spinner"></div>
    <div class="description">Store every byte of your social activity. Opening soon..</div>

    <form class="notify-me-form" action="/notify" method="post">
      <input type="text" class="email" placeholder="your@email.com">
      <input type="submit" class="send-email" value="Notify me">
    </form>
    
  </section>

  <script src="components/jquery/jquery.js"></script>
  <script type="text/javascript">
    $(function () {
      $('.notify-me-form').on('submit', function (e) {
        e.preventDefault();

        var $form = $(e.target),
            $email = $form.find('.email'),
            email = $email.val();

        $form.removeClass('error');
        $form.find('span').remove();

        $email.keydown(function (e) {
          $form.removeClass('error');
        });

        if (!validateEmail(email)) {
          $form.addClass('error');
          return;
        }

        $.post('/notify', { email: email }, 
          function () {
            $form.addClass('success');
            $email.before('<span class="success-message">Congrats! You will be notified!</span>');
          });
      });

      function validateEmail (email) {
        var reg = /^([\w.-]+)@([\w-]+)((.(\w){2,3})+)$/i;
        return reg.test(email);
      }
    });
  </script>
</body>
</html>